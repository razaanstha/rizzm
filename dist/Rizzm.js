const y={fadeIn:[{opacity:"var(--rizzm-fadein-opacity-start, 0)"},{opacity:"var(--rizzm-fadein-opacity-end, 1)"}],fadeInUp:[{opacity:"var(--rizzm-fadein-up-opacity-start, 0)",transform:"translateY(var(--rizzm-fadein-up-translate-y-start, 20px))"},{opacity:"var(--rizzm-fadein-up-opacity-end, 1)",transform:"translateY(var(--rizzm-fadein-up-translate-y-end, 0))"}],fadeInDown:[{opacity:"var(--rizzm-fadein-down-opacity-start, 0)",transform:"translateY(var(--rizzm-fadein-down-translate-y-start, -20px))"},{opacity:"var(--rizzm-fadein-down-opacity-end, 1)",transform:"translateY(var(--rizzm-fadein-down-translate-y-end, 0))"}],fadeInLeft:[{opacity:"var(--rizzm-fadein-left-opacity-start, 0)",transform:"translateX(var(--rizzm-fadein-left-translate-x-start, -20px))"},{opacity:"var(--rizzm-fadein-left-opacity-end, 1)",transform:"translateX(var(--rizzm-fadein-left-translate-x-end, 0))"}],fadeInRight:[{opacity:"var(--rizzm-fadein-right-opacity-start, 0)",transform:"translateX(var(--rizzm-fadein-right-translate-x-start, 20px))"},{opacity:"var(--rizzm-fadein-right-opacity-end, 1)",transform:"translateX(var(--rizzm-fadein-right-translate-x-end, 0))"}],zoomIn:[{opacity:"var(--rizzm-zoom-in-opacity-start, 0)",transform:"scale(var(--rizzm-zoom-in-scale-start, 0.95))"},{opacity:"var(--rizzm-zoom-in-opacity-end, 1)",transform:"scale(var(--rizzm-zoom-in-scale-end, 1))"}],zoomInRotate:[{opacity:"var(--rizzm-zoom-in-rotate-opacity-start, 0)",transform:"scale(var(--rizzm-zoom-in-rotate-scale-start, 0.95)) rotate(var(--rizzm-zoom-in-rotate-rotate-start, -5deg))"},{opacity:"var(--rizzm-zoom-in-rotate-opacity-end, 1)",transform:"scale(var(--rizzm-zoom-in-rotate-scale-end, 1)) rotate(var(--rizzm-zoom-in-rotate-rotate-end, 0))"}],slideFromLeft:[{opacity:"var(--rizzm-slide-from-left-opacity-start, 0)",transform:"translateX(var(--rizzm-slide-from-left-start, -100%))"},{opacity:"var(--rizzm-slide-from-left-opacity-end, 1)",transform:"translateX(var(--rizzm-slide-from-left-end, 0))"}],slideFromRight:[{opacity:"var(--rizzm-slide-from-right-opacity-start, 0)",transform:"translateX(var(--rizzm-slide-from-right-start, 100%))"},{opacity:"var(--rizzm-slide-from-right-opacity-end, 1)",transform:"translateX(var(--rizzm-slide-from-right-end, 0))"}],slideFromTop:[{opacity:"var(--rizzm-slide-from-top-opacity-start, 0)",transform:"translateY(var(--rizzm-slide-from-top-start, -100%))"},{opacity:"var(--rizzm-slide-from-top-opacity-end, 1)",transform:"translateY(var(--rizzm-slide-from-top-end, 0))"}],slideFromBottom:[{opacity:"var(--rizzm-slide-from-bottom-opacity-start, 0)",transform:"translateY(var(--rizzm-slide-from-bottom-start, 100%))"},{opacity:"var(--rizzm-slide-from-bottom-opacity-end, 1)",transform:"translateY(var(--rizzm-slide-from-bottom-end, 0))"}],flipFromLeft:[{transform:"perspective(var(--rizzm-flip-from-left-perspective, 40em)) rotateY(var(--rizzm-flip-from-left-rotate-start, -90deg))",opacity:"var(--rizzm-flip-from-left-opacity-start, 0)"},{transform:"perspective(var(--rizzm-flip-from-left-perspective, 40em)) rotateY(var(--rizzm-flip-from-left-rotate-end, 0deg))",opacity:"var(--rizzm-flip-from-left-opacity-end, 1)"}],flipFromRight:[{transform:"perspective(var(--rizzm-flip-from-right-perspective, 40em)) rotateY(var(--rizzm-flip-from-right-rotate-start, 90deg))",opacity:"var(--rizzm-flip-from-right-opacity-start, 0)"},{transform:"perspective(var(--rizzm-flip-from-right-perspective, 40em)) rotateY(var(--rizzm-flip-from-right-rotate-end, 0deg))",opacity:"var(--rizzm-flip-from-right-opacity-end, 1)"}],flipFromTop:[{transform:"perspective(var(--rizzm-flip-from-top-perspective, 40em)) rotateX(var(--rizzm-flip-from-top-rotate-start, 90deg))",opacity:"var(--rizzm-flip-from-top-opacity-start, 0)"},{transform:"perspective(var(--rizzm-flip-from-top-perspective, 40em)) rotateX(var(--rizzm-flip-from-top-rotate-end, 0deg))",opacity:"var(--rizzm-flip-from-top-opacity-end, 1)"}],flipFromBottom:[{transform:"perspective(var(--rizzm-flip-from-bottom-perspective, 40em)) rotateX(var(--rizzm-flip-from-bottom-rotate-start, -90deg))",opacity:"var(--rizzm-flip-from-bottom-opacity-start, 0)"},{transform:"perspective(var(--rizzm-flip-from-bottom-perspective, 40em)) rotateX(var(--rizzm-flip-from-bottom-rotate-end, 0deg))",opacity:"var(--rizzm-flip-from-bottom-opacity-end, 1)"}],bounceIn:[{transform:"scale(var(--rizzm-bounce-in-scale-start, 0.3))",opacity:"var(--rizzm-bounce-in-opacity-start, 0)"},{transform:"scale(var(--rizzm-bounce-in-scale-mid, 1.1))",opacity:"var(--rizzm-bounce-in-opacity-mid, 1)",offset:.5},{transform:"scale(var(--rizzm-bounce-in-scale-overshoot, 0.9))",opacity:"var(--rizzm-bounce-in-opacity-overshoot, 1)",offset:.7},{transform:"scale(var(--rizzm-bounce-in-scale-end, 1))",opacity:"var(--rizzm-bounce-in-opacity-end, 1)",offset:1}],rotateIn:[{transformOrigin:"var(--rizzm-rotate-in-transform-origin, center)",transform:"rotate3d(0, 0, 1, var(--rizzm-rotate-in-rotate-start, -200deg))",opacity:"var(--rizzm-rotate-in-opacity-start, 0)"},{transformOrigin:"var(--rizzm-rotate-in-transform-origin, center)",transform:"rotate3d(0, 0, 1, var(--rizzm-rotate-in-rotate-end, 0deg))",opacity:"var(--rizzm-rotate-in-opacity-end, 1)"}]};class h{constructor(r={}){if(this.checkBrowserSupportAndSkipIfNotSupported())return;const{selector:a=".js-rizzm",options:t={},customKeyframes:e={},paused:i=!1}=r;this.selectors=Array.isArray(a)?a:[a],this.defaultOptions={rootMargin:"0px",threshold:.2,stagger:200,...t},this.keyframeAnimations={...y,...e},this.animatedElements=new Set,this.observer=new IntersectionObserver(this.animateElements.bind(this),this.defaultOptions),i||this.initialize()}initialize(){this.updateElements()}checkBrowserSupportAndSkipIfNotSupported(){return typeof window>"u"||!("IntersectionObserver"in window)||!("animate"in Element.prototype)?(console.warn("BROWSER: Skipping Rizzm. Browser doesn't support IntersectionObserver and Web Animations API."),!0):window.CSS&&window.CSS.supports&&!window.CSS.supports("--a",0)?(console.warn("BROWSER: CSS variables are not supported."),!0):window.matchMedia("(prefers-reduced-motion: reduce)").matches?(console.warn("Reduced motion enabled. ANIMATIONS PREVENTED."),!0):!1}animateElements(r){r.forEach((a,t)=>{if(a.isIntersecting){const e=a.target;if(this.shouldPreventAnimation(e)||this.animatedElements.has(e)){this.observer.unobserve(e);return}const i=parseInt(this.getCSSVariable(e,"--rizzm-duration",500),10),s=this.getCSSVariable(e,"--rizzm-keyframe","fadeInUp"),n=this.parseJSON(this.getCSSVariable(e,"--rizzm-keyframes",null));let o={};if(s==="random"){const m=Object.keys(this.keyframeAnimations),d=m[Math.floor(Math.random()*m.length)];o=this.getAnimationKeyframes(d,n)}else o=this.getAnimationKeyframes(s,n);const f=parseInt(this.getCSSVariable(e,"--rizzm-stagger",this.defaultOptions.stagger),10),z=this.getCSSVariable(e,"--rizzm-easing","cubic-bezier(0.25, 0.1, 0.25, 1)"),p=this.getCSSVariable(e,"--rizzm-fill","forwards"),l=parseInt(this.getCSSVariable(e,"--rizzm-delay",(f*t).toString()),10),c=this.getCSSVariable(e,"--rizzm-iteration",1);e.animate(o,{duration:i,easing:z,fill:p,delay:l,iterations:c}).onfinish=()=>{e.dataset.rizzmAnimated=!0,this.animatedElements.add(e)},this.observer.unobserve(e)}})}shouldPreventAnimation(r){const a=getComputedStyle(r).getPropertyValue("--rizzm-prevent-animations").trim(),t=getComputedStyle(r).getPropertyValue("--rizzm-keyframe").trim();return a==="true"||t==="none"||t==="false"||t===void 0||t===null}getCSSVariable(r,a,t){const e=getComputedStyle(r).getPropertyValue(a).trim();return e===""?t:e}getAnimationKeyframes(r,a={}){const t=this.keyframeAnimations[r]||this.keyframeAnimations.fadeInUp;let e;return Array.isArray(t)?e=a.length?a:t:e={...t,...a},e}parseJSON(r,a={}){if(!r)return a;try{return JSON.parse(r)}catch{return console.warn(`Invalid JSON: ${r}. Using fallback value.`),a}}updateElements(r=null){let a;if(r)if(Array.isArray(r)||typeof r=="string")this.selectors=Array.isArray(r)?r:[r],a=this.selectors.flatMap(t=>Array.from(document.querySelectorAll(t)));else if(r instanceof NodeList||r instanceof Element)a=r instanceof NodeList?Array.from(r):[r];else{console.warn("Invalid selector type.");return}else a=this.selectors.flatMap(t=>Array.from(document.querySelectorAll(t)));if(!a||a.length===0){console.warn("No elements found with the specified selector(s).");return}a.forEach(t=>{!this.shouldPreventAnimation(t)&&!this.animatedElements.has(t)?(t.style.opacity="0",t.style.transform="none",this.observer.observe(t)):(t.style.opacity=!1,t.style.transform=!1)}),document.body.classList.add("js-rizzm-initialized")}}export{h as R};
